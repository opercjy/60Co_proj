# 오디오 신호 분석 스크립트

## 1\. 프로젝트 개요

이 파이썬 스크립트는 오디오 파일(`  .m4a `, `  .wav ` 등)을 분석하여 특정 소리 이벤트(버저음 등)의 발생 횟수를 탐지하고 시각화합니다. 분석은 다음 두 가지 관점에서 이루어집니다.

1.  **시간 영역 (Time-Domain)**: 소리의 크기(진폭)가 특정 기준치를 넘는 횟수를 계산합니다.
2.  **주파수 영역 (Frequency-Domain)**: 소리의 전체 주파수 에너지 변화를 추적하여 에너지가 급격히 증가하는 지점(피크)의 개수를 셉니다.

분석 결과는 터미널에 텍스트로 출력되며, 상세한 분석 과정을 담은 그래프가 이미지 파일로 저장됩니다.

-----

## 2\. 필요 라이브러리 및 설치

분석을 위해 아래의 파이썬 라이브러리들이 필요합니다. 터미널에서 다음 명령어를 실행하여 설치할 수 있습니다.

```bash
pip install librosa matplotlib numpy scipy mplhep
```

**※ 중요**: `librosa`는 `.m4a`와 같은 압축 오디오 포맷을 처리하기 위해 **FFmpeg**이라는 외부 프로그램이 필요합니다. 만약 오디오 파일을 불러오는 데 오류가 발생하면 시스템에 FFmpeg을 설치해야 합니다.

-----

## 3\. 실행 방법

1.  `analyze_audio_events.py` 스크립트와 분석할 오디오 파일(예: `10(down).m4a`)을 같은 폴더에 위치시킵니다.
2.  스크립트 하단의 `audio_file` 변수 값을 실제 파일명으로 설정합니다.
3.  터미널에서 다음 명령어로 스크립트를 실행합니다.
    ```bash
    python analyze_audio_events.py
    ```

-----

## 4\. 코드 주요 기능 및 사용자 조정

스크립트 내의 `사용자 조정 필요 구간`에서 다음 두 변수를 수정하여 분석 민감도를 조절할 수 있습니다.

  * `AMP_THRESHOLD`: **시간 영역 진폭 임계값** (0\~1 사이). 소리의 크기가 이 값을 넘을 때마다 카운트됩니다. 값이 낮을수록 작은 소리도 감지합니다.
  * `PEAK_HEIGHT_THRESHOLD`: **주파수 영역 에너지 피크 임계값** (0\~1 사이). 전체 주파수의 에너지가 순간적으로 이 값을 넘을 때 이벤트로 간주합니다. 값이 낮을수록 작은 에너지 변화도 이벤트로 감지합니다.

-----

## 5\. 결과물

스크립트를 실행하면 다음과 같은 결과물이 생성됩니다.

  * **터미널 출력**: 시간 영역과 주파수 영역에서 각각 감지된 이벤트의 총 개수가 출력됩니다.
  * **`full_audio_analysis_total_freq.png`**: 4개의 그래프를 포함한 종합 분석 이미지 파일.
    1.  **시간 영역 파형**: 원본 오디오 파형과 진폭 임계값을 표시합니다.
    2.  **스펙트로그램**: 시간에 따른 주파수 성분 변화를 시각화하여 소리의 특성을 파악할 수 있습니다.
    3.  **주파수 히스토그램**: 오디오 전체에 어떤 주파수 성분이 강하게 분포하는지 보여줍니다.
    4.  **전체 스펙트럼 에너지**: 시간에 따른 전체 주파수 에너지의 변화와 감지된 피크 지점을 표시합니다.
